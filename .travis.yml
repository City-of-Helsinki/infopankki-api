language: python

cache: pip

python:
  - '3.5'
  - '3.6'
  - 'nightly'

addons:
  apt:
    packages:
    - build-essential
    - gettext
    - python-dev
    - zlib1g-dev
    - libpq-dev
    - xvfb
    - libtiff4-dev
    - libjpeg8-dev
    - libfreetype6-dev
    - liblcms1-dev
    - libwebp-dev
    - graphviz-dev
    - python-setuptools
    - python3-dev
    - python-virtualenv
    - python-pip
    - firefox
    - automake
    - libtool
    - libreadline6
    - libreadline6-dev
    - libreadline-dev
    - libsqlite3-dev
    - libxml2
    - libxml2-dev
    - libssl-dev
    - libbz2-dev
    - wget
    - curl
    - llvm

install: pip install pytest-cov -r requirements/base.txt -r requirements/test.txt

script:
  - flake8
  - pytest --cov=.

after_success: codecov
